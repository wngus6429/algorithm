function solution(s) {
  let answer = 0; // 잘려진 쇠막대기의 총 개수를 저장할 변수
  let stack = []; // '(' 문자를 저장할 스택 (현재 열려있는 쇠막대기 수를 추적)

  for (let i = 0; i < s.length; i++) {
    // 1. '('인 경우
    if (s[i] === "(") {
      // 쇠막대기의 시작이거나 레이저의 시작을 의미
      stack.push("(");

      // 2. ')'인 경우
    } else {
      // 일단 이전에 들어있던 '(' 하나를 스택에서 꺼냄
      // 여기서 pop()은 "현재 열려있던 막대기 혹은 레이저의 시작"을 제거
      stack.pop();

      // 레이저인지, 쇠막대기의 끝인지 확인하기 위해 이전 문자를 체크
      if (s[i - 1] === "(") {
        // 직전 문자가 '('라면 "()" 형태 -> 레이저
        // 레이저가 발사된 시점에서 스택에 남아있는 '('의 개수 = 현재 열려있는 쇠막대기 수
        // 따라서 스택에 남아있는 '('의 개수만큼 잘린 조각이 발생
        answer += stack.length;
      } else {
        // 직전 문자가 '('가 아니면, 이것은 쇠막대기의 끝
        // 끝나는 시점에도 조각 1개가 추가됨
        answer++;
      }
    }
  }

  return answer;
}

// 테스트
let a = "()(((()())(())()))(())";
console.log(solution(a)); // 결과: 17
